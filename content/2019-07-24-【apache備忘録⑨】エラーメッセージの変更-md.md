---
title: 【Apache備忘録⑨】エラーメッセージの変更
date: 2019-07-24T00:49:50.525Z
cover: /assets/apache.png
slug: 【Apache備忘録⑨】エラーメッセージの変更
category: プログラミング
tags:
  - Apache
  - Linux
  - AWS
---
HTTPレスポンスヘッダーの先頭行には、ステータスコード（200とか404とか）がついている。

ステータスコードにはそれぞれ意味があり、エラーが起きた場合にエラーの内容を知ることができる。

エラーが起きた場合、サーバーから送られたエラードキュメントがユーザーの画面に表示される。

Apacheにはエラードキュメントがデフォルトで用意されているが、自作のメッセージを表示することもできる。

<br>

## 主なステータスコード

頻出するステータスコードは以下の通り。

| 番号  | メッセージ                 | 詳細            |
| --- | --------------------- | ------------- |
| 200 | OK                    | 正常            |
| 404 | Not Found             | 該当ページが存在しない   |
| 403 | Forbidden             | アクセスが禁止されている  |
| 401 | Unauthorized          | 認証が必要         |
| 301 | Moved Permanently     | URLが変更された     |
| 302 | Found                 | URLが一時的に変更された |
| 500 | Internal Server Error | サーバー内での実行時エラー |

<br>

## 設定を変更する

設定は以下のファイルを修正することで実装できる。

```
$ sudo vi /etc/httpd/conf/httpd.conf
```

「ErrorDocument」ディレクティブを使用することで、カスタムページを実装できる。

ファイル末尾に以下の内容を追加する。

```
# 省略

# ステータスコード 404 のとき ドキュメントルート下の 404.html をクライアントに返す
ErrorDocument 404 /404.html
```

<br>

### 動作確認

確認用にステータスコード404の時に表示するファイルを作成する。

（ここでは、ユーザー固有のファイルを作成している。）

```
$ vi ~/public_html/404.html
```

内容は以下の通り。

```
<html>
  <head>
    <title>404  Not Found</title>
  </head>
  <body>
    <h1>ページが存在しません</h1>
    <div>
      Kento >>> 404.html
    </div>
  </body>
</html>
```

設定できたら、サーバーを再起動してブラウザから「ユーザーのホスト名/aaa」にアクセスする。

自作したページが表示されるようになる。

![apache-learn-9-1](/assets/apache-learn-9-1.png)
